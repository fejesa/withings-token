# withings-token
OAuth 2.0 client for Withings Health Mate API.
Register your application by filling the form: https://account.withings.com/partner/dashboard_oauth2 

## Requirements
Install Java 11 and Maven.

## How to build?
To build the app run ``mvn compile``.

## How to setup?
Set the application properties, like
``
withings.api.tokenHost = https://account.withings.com/oauth2/token
withings.api.clientId = your client id
withings.api.clientSecret = your client secret
withings.api.redirectUri = your redirect URI
``

## How to run?
Firstly you need to get your authentication code from [Withings] (https://developer.withings.com/oauth2/#tag/OAuth-2.0%2Fpaths%2Fhttps%3A~1~1account.withings.com~1oauth2_user~1authorize2%3Fresponse_type%3Dcode%5B...%5D%2Fget).
The _code_ that generated by Withings is the input for generating access token.

To get access token you have to run the following command:
``mvn exec:java -Dexec.mainClass="io.myhealth.withings.HealthMateClientApp" -Dexec.args="-access path-to-app-properties your-withings-code"``

To get refresh token you have to run the following command:
``mvn exec:java -Dexec.mainClass="io.myhealth.withings.HealthMateClientApp" -Dexec.args="-refresh path-to-app-properties your-current-refresh-token"``

The response is printed out to the console.
